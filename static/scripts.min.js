document.addEventListener("DOMContentLoaded",()=>{const e=document.documentElement,t=document.getElementById("theme-toggle"),a=localStorage.getItem("theme");a?e.dataset.theme=a:e.dataset.theme||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?e.dataset.theme="dark":e.dataset.theme="light"),t.addEventListener("click",async()=>{const t="dark"===e.dataset.theme?"light":"dark";e.dataset.theme=t,localStorage.setItem("theme",t);try{const e=await fetch("/set_theme",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({theme:t})});e.ok||console.error("서버에 테마 저장 중 오류:",e.status)}catch(e){console.error("테마 저장 요청 실패:",e)}})});